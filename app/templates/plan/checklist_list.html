{% extends "layout.html" %}
{% block title %}持ち物リスト{% endblock %}
{% block content %}
<section class="plan-shell">
  <div class="plan-header">
    <div>
      <p class="plan-title" data-plan-title="{{ plan.title if plan and plan.title else (plan.destination if plan else 'プラン') }}">
        {% if plan and plan.destination %}
          {{ plan.destination }}
        {% elif plan and plan.title %}
          {{ plan.title }}
        {% else %}
          プラン
        {% endif %}
        {% if plan and plan.days %}　{{ (plan.days - 1) if plan.days > 0 else 0 }}泊{{ plan.days }}日{% endif %}
        <span class="icon-inline" aria-hidden="true">✎</span>
      </p>
    </div>
    <div class="plan-meta">
      {% if plan and plan.start_date %}
      <span class="plan-date">{{ plan.start_date }}</span>
      {% endif %}
      <button type="button" class="pill-button">共有</button>
      <button type="button" class="pill-button" data-plan-save-trigger>保存</button>
    </div>
  </div>

  <div class="plan-tabs">
    <a href="{{ url_for('plan.plan_transit') }}">交通手段</a>
    <a href="{{ url_for('plan.stay_select') }}">宿泊場所</a>
    <a href="{{ url_for('plan.schedule_list') }}">スケジュール</a>
    <a class="active">持ち物</a>
  </div>

  <div class="checklist-body">
    <div class="panel-header">
      <div class="error-inline" data-checklist-error hidden>保存に失敗しました</div>
      <a class="cta-primary small" href="{{ url_for('plan.checklist_edit') }}" name="edit">編集</a>
    </div>

    <div class="category-grid">
      {% for category in categories %}
      <article class="category-card">
        <header class="category-title">{{ category.title }}</header>
        <div class="item-stack">
          {% for item in category['items'] %}
          <button type="button" name="item" class="item-button">
            <span class="item-name">{{ item.name }}</span>
            {% if item.quantity %}<span class="item-qty">数量:{{ item.quantity }}</span>{% endif %}
          </button>
          {% endfor %}
        </div>
      </article>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}
