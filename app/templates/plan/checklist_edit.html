{% extends "layout.html" %}
{% block title %}æŒã¡ç‰©ãƒªã‚¹ãƒˆç·¨é›†{% endblock %}
{% block content %}
<section class="plan-shell">
  <div class="plan-header">
    <div>
      <p class="plan-title" data-plan-title="{{ plan.title if plan and plan.title else (plan.destination if plan else 'ãƒ—ãƒ©ãƒ³') }}">
        {% if plan and plan.destination %}
          {{ plan.destination }}
        {% elif plan and plan.title %}
          {{ plan.title }}
        {% else %}
          ãƒ—ãƒ©ãƒ³
        {% endif %}
        {% if plan and plan.days %}ã€€{{ (plan.days - 1) if plan.days > 0 else 0 }}æ³Š{{ plan.days }}æ—¥{% endif %}
        <span class="icon-inline" aria-hidden="true">âœ</span>
      </p>
    </div>
    <div class="plan-meta">
      {% if plan and plan.start_date %}
      <span class="plan-date">{{ plan.start_date }}</span>
      {% endif %}
      <button type="button" class="pill-button" data-plan-share-trigger>å…±æœ‰</button>
      <button type="button" class="pill-button" data-plan-save-trigger>ä¿å­˜</button>
      <div class="error-inline" data-checklist-error hidden>ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ</div>
      <a class="cta-primary small" href="#" data-checklist-submit name="submit">ç¢ºå®š</a>
    </div>
  </div>

  <div class="plan-tabs">
    <a href="{{ url_for('plan.plan_transit') }}">äº¤é€šæ‰‹æ®µ</a>
    <a href="{{ url_for('plan.stay_select') }}">å®¿æ³Šå ´æ‰€</a>
    <a href="{{ url_for('plan.schedule_list') }}">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</a>
    <a class="active">æŒã¡ç‰©</a>
  </div>

  <div class="checklist-body">
    <div class="category-grid" data-checklist-list>
      {% for category in categories %}
      <article class="category-card" data-category-id="{{ category.id }}">
        <header class="category-title">{{ category.title }}</header>
        <div class="item-stack">
          {% for item in category['items'] %}
          <div class="edit-row" data-item-row>
            <input name="item_form" type="text" value="{{ item.name }}" placeholder="è¿½åŠ ..." />
            <div class="row-right">
              <input name="num_from" type="text" value="{{ item.quantity }}" placeholder="æ•°é‡ã‚’å…¥åŠ›" />
              <button type="button" name="delete" class="icon-button" data-item-delete aria-label="å‰Šé™¤">ğŸ—‘</button>
            </div>
          </div>
          {% endfor %}
          <button type="button" name="item_append" class="adder" data-item-add>è¿½åŠ ...</button>
        </div>
      </article>
      {% endfor %}
    </div>
    <div class="footer-actions">
      <button type="button" name="item_append" class="secondary-button" data-item-add-global>ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¿½åŠ </button>
    </div>
  </div>
</section>
<script defer src="{{ url_for('static', filename='js/checklist.js') }}"></script>
{% endblock %}
